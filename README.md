# Word Battle - 多人在线游戏平台

一个基于WebSocket的多人在线游戏平台，支持多设备实时连接和房间管理。

## 功能特点

- 🎮 **多人实时游戏** - 支持多个玩家同时在线
- 🏠 **房间系统** - 创建和加入游戏房间
- 📱 **多设备支持** - PC、手机等设备通过浏览器访问
- 🔄 **实时同步** - 玩家状态和房间信息实时更新
- 💾 **身份持久化** - 刷新页面后保持玩家身份
- 🌐 **局域网支持** - 支持局域网内多设备连接

## 技术栈

- **后端**: Node.js + Express + Socket.IO
- **前端**: HTML5 + CSS3 + JavaScript
- **设计**: 现代化简洁UI，采用Apple设计语言

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动服务器

```bash
npm start
```

或者使用开发模式（支持热重载）：

```bash
npm run dev
```

### 3. 访问应用

- **本地访问**: http://localhost:3000
- **局域网访问**: http://[你的IP地址]:3000

## 端口配置

- **前端**: 3000端口
- **后端**: 3001端口

## 使用说明

### 游戏大厅

1. **玩家身份**: 每个设备会自动分配唯一身份（player1, player2...）
2. **在线玩家**: 查看当前在线的其他玩家及其状态
3. **活动房间**: 查看所有可加入的游戏房间

### 房间系统

1. **创建房间**: 点击"创建房间"按钮，输入房间名称
2. **加入房间**: 点击房间卡片即可加入
3. **房间管理**: 房主可以开始游戏，所有人都可以退出房间
4. **房间解散**: 房主离开时房间自动解散

### 玩家状态

- **空闲**: 在游戏大厅中
- **游戏中**: 在房间内等待或正在游戏

## 局域网设置

### 服务器配置

确保服务器监听所有网络接口：

```javascript
server.listen(3001, '0.0.0.0', () => {
    console.log('服务器运行在端口 3001');
});
```

### 防火墙设置

如果无法访问，请检查防火墙设置：

- Windows: 允许3000和3001端口通过防火墙
- 或者临时关闭防火墙进行测试

### 获取本机IP地址

```bash
# Windows
ipconfig

# macOS/Linux
ifconfig
```

## 开发指南

### 项目结构

```
WordBattle/
├── server.js          # 后端服务器
├── package.json        # 项目配置
├── public/            # 前端文件
│   ├── index.html     # 主页面
│   ├── styles.css     # 样式文件
│   └── script.js      # 前端逻辑
└── README.md          # 说明文档
```

### 消息协议

**客户端 → 服务器**:
- `request_identity`: 请求身份分配
- `create_room`: 创建房间
- `join_room`: 加入房间
- `leave_room`: 离开房间
- `start_game`: 开始游戏

**服务器 → 客户端**:
- `identity_assigned`: 身份分配完成
- `game_state_update`: 游戏状态更新
- `players_update`: 玩家列表更新
- `game_started`: 游戏开始
- `room_dissolved`: 房间解散

## 故障排除

### 常见问题

1. **连接失败**
   - 检查服务器是否启动
   - 确认端口3001未被占用
   - 检查防火墙设置

2. **局域网无法访问**
   - 确认服务器监听0.0.0.0而非127.0.0.1
   - 检查防火墙是否阻止了3000/3001端口
   - 确认设备在同一局域网内

3. **页面刷新后断开连接**
   - 这是正常行为，系统会自动重连并恢复身份

### 重启服务

如果遇到端口占用问题：

```bash
# 停止可能占用端口的进程
npm run stop

# 重新启动
npm start
```

## 性能指标

- 支持至少10个同时在线用户
- 消息延迟不超过500ms
- 页面加载时间不超过3秒

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！ 